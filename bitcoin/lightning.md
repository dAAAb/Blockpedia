# Lightning Network

## Lightning Network 是比特幣的「第二層」，讓比特幣交易變得即時、便宜，終於可以用來「買咖啡」。

比特幣有一個問題：太慢、太貴。

一筆交易要等 10 分鐘確認，手續費可能比咖啡本身還貴。

**Lightning Network** 解決了這個問題。

現在，你可以用比特幣在一秒內完成支付，手續費不到一分錢。

### 比特幣的擴容問題

比特幣主網的限制：

**速度**
- 約每 10 分鐘產生一個區塊
- 等待確認需要時間

**容量**
- 每秒約 7 筆交易（TPS）
- Visa 是每秒數千筆

**手續費**
- 繁忙時可能數十美元
- 小額支付不划算

這些限制讓比特幣難以成為「日常支付」工具。

### Lightning Network 是什麼？

Lightning Network 是比特幣的「第二層」（Layer 2）解決方案。

**核心概念**

不是每筆交易都上主鏈，而是：
1. 在主鏈上開設「支付通道」
2. 通道內的交易瞬間完成、幾乎免費
3. 最後才把結果結算到主鏈

就像酒吧的「記帳」：
- 你不用每喝一杯就付一次錢
- 喝完再一次結清

### 支付通道

Lightning 的核心是「支付通道」。

**開設通道**

1. Alice 和 Bob 想要頻繁交易
2. 他們在比特幣主鏈上創建一筆「開通道」交易
3. 存入一定金額（如各 0.5 BTC）
4. 這筆錢被「鎖定」在通道中

**通道內交易**

1. Alice 想付 Bob 0.1 BTC
2. 他們更新通道內的「餘額分配」
3. 不需要上鏈，瞬間完成
4. 可以來回交易無數次

**關閉通道**

1. 當他們不再需要通道時
2. 把最終餘額結算到主鏈
3. 只有開和關兩筆主鏈交易

### 路由

你不需要與每個人都開通道。

Lightning 可以「路由」支付：

```
Alice → Bob → Charlie → David
```

Alice 想付錢給 David，但他們沒有直接通道。沒關係：
- Alice 付給 Bob
- Bob 付給 Charlie
- Charlie 付給 David

這個過程是原子性的——要嘛全部成功，要嘛全部失敗。

### 技術特點

**速度**
- 毫秒到秒級確認
- 不需要等待區塊

**成本**
- 手續費通常不到 1 分錢
- 小額支付可行

**容量**
- 理論上每秒百萬筆交易
- 取決於網路拓撲

**隱私**
- 交易不在主鏈上
- 比主鏈交易更私密

### 發展歷程

**2015 年**：Lightning 白皮書發布（Joseph Poon, Thaddeus Dryja）

**2018 年**：主網上線

**2019-2020 年**：緩慢成長

**2021 年**：薩爾瓦多採用，熱度上升

**2022-2024 年**：生態系統持續發展

### 網路狀態

截至 2025 年，Lightning Network：

- **節點數**：約 15,000+
- **通道數**：約 60,000+
- **總容量**：約 5,000+ BTC
- **活躍地區**：美洲、歐洲、非洲

網路持續成長，但相對比特幣整體規模仍較小。

### 錢包和應用

**Lightning 錢包**

- **Phoenix**：Acinq 開發，自動管理通道
- **Breez**：用戶友善，非託管
- **Muun**：整合主鏈和 Lightning
- **Wallet of Satoshi**：最簡單，但是託管
- **Zeus**：進階用戶，自己運行節點

**整合 Lightning 的服務**

- **Cash App**：支援 Lightning 收付
- **Strike**：專注 Lightning 支付
- **Bitrefill**：用 Lightning 買禮品卡
- **各種交易所**：Kraken、River 等

### 用例

**小額支付**

Lightning 讓小額支付可行：
- 網路打賞
- 內容付費（按篇、按秒計費）
- 遊戲內購買

**跨境匯款**

如「[跨境支付](../payments/cross-border.md)」章節所述：
- 速度快
- 手續費低
- Strike 等服務在使用

**點對點支付**

朋友之間分帳、付款，即時完成。

**商戶收款**

[Block 的 Bitcoin for Business](../payments/block-btc.md) 就是使用 Lightning。

### 薩爾瓦多案例

2021 年，薩爾瓦多成為第一個將比特幣列為法定貨幣的國家。

政府推出的 **Chivo 錢包**基於 Lightning。

**正面**
- 降低了比特幣支付門檻
- 很多商家開始接受
- 減少匯款成本

**負面**
- 採用率不如預期
- 技術問題頻繁
- 用戶體驗有待改善

薩爾瓦多是 Lightning 最大規模的實驗場。

### 挑戰

Lightning Network 面臨的挑戰：

**1. 通道管理複雜**

對普通用戶來說，管理通道、流動性是複雜的。

新一代錢包（如 Phoenix）在簡化這個問題。

**2. 流動性問題**

支付需要路徑上有足夠的流動性。大額支付可能找不到路徑。

**3. 在線要求**

接收支付需要節點在線。這對手機用戶是挑戰。

**4. 路由費用**

雖然費用低，但複雜路由可能累積費用。

**5. 安全風險**

- 需要保持私鑰安全
- 舊狀態攻擊（需要 Watchtower 防範）

### 與其他 Layer 2 的比較

| 特性 | Lightning（比特幣）| Rollups（以太坊）|
|------|-------------------|------------------|
| 類型 | 支付通道 | 鏈下執行 |
| 用途 | 主要是支付 | 通用智能合約 |
| 資料可用性 | 鏈下 | 部分上鏈 |
| 即時性 | 即時 | 近即時 |
| 複雜度 | 較高（通道管理）| 較低（用戶角度）|

### 未來發展

Lightning 可能的發展方向：

**1. 用戶體驗改善**

- 更好的自動通道管理
- 更簡單的錢包
- 離線接收解決方案

**2. 企業採用**

- 更多商家整合
- 支付處理商支援
- B2B 支付

**3. 與其他技術整合**

- Taproot Assets：在 Lightning 上傳輸其他資產
- Taro：穩定幣在 Lightning 上
- Nostr：社交網路整合

**4. 跨境支付**

成為跨境匯款的重要管道，特別是新興市場。

**5. 機構參與**

更多機構提供 Lightning 服務。

### 如何開始？

如果你想嘗試 Lightning：

**簡單方式**
1. 下載 Wallet of Satoshi（託管，最簡單）
2. 存入少量比特幣
3. 嘗試發送和接收

**進階方式**
1. 下載 Phoenix 或 Breez（非託管）
2. 自動設置通道
3. 保管好助記詞

**最進階**
1. 運行自己的 Lightning 節點
2. 手動管理通道
3. 需要技術知識

{% hint style="info" %}
Lightning Network 讓比特幣「真正可用」於日常支付。它不是完美的，但正在變得越來越好。
{% endhint %}

---

#### 參考資料

- [Lightning Network 白皮書](https://lightning.network/lightning-network-paper.pdf)
- [Lightning Labs](https://lightning.engineering/)
- [1ML - Lightning 統計](https://1ml.com/)
- [ACINQ](https://acinq.co/)
