---
description: 共識演算法是讓分散式系統達成一致的數學方法，是區塊鏈技術的理論基礎。
---

# 演算法

### 在區塊鏈出現之前，計算機科學家已經研究了數十年的「分散式系統一致性問題」。這些演算法是區塊鏈共識機制的理論基礎，也是理解區塊鏈為什麼安全的關鍵。

---

## 核心問題

| 問題 | 說明 |
|------|------|
| [拜占庭將軍問題](bai-zhan-ting.md) | 如何在有叛徒的情況下達成共識？ |
| [雙花問題](hua.md) | 如何防止同一筆錢花兩次？ |
| 最終一致性 | 所有節點最終會達成相同狀態 |

---

## 傳統分散式演算法

### 經典演算法

| 演算法 | 年份 | 用途 |
|--------|------|------|
| Paxos | 1989 | 分散式系統共識 |
| Raft | 2014 | Paxos 的簡化版 |
| PBFT | 1999 | 拜占庭容錯 |

### PBFT

```
實用拜占庭容錯（PBFT）：

特點：
- 可容忍 1/3 惡意節點
- 需要已知的節點清單
- 通訊複雜度高

應用：
- Hyperledger Fabric
- 許多聯盟鏈
```

---

## 區塊鏈共識演算法

### 主要創新

| 創新 | 說明 |
|------|------|
| PoW | 用算力解決拜占庭問題 |
| 經濟激勵 | 用獎懲機制確保誠實行為 |
| 機率最終性 | 不是 100% 確定，但機率很高 |

### 演算法比較

| 演算法 | 容錯 | 最終性 | 吞吐量 |
|--------|------|--------|--------|
| PBFT | 1/3 惡意 | 即時 | 中 |
| PoW | 50% 算力 | 機率 | 低 |
| PoS | 1/3 質押 | 機率/即時 | 高 |

---

## 非區塊鏈結構

### DAG 結構

| 項目 | 結構 | 說明 |
|------|------|------|
| [Tangle](tangle.md) | DAG | IOTA 使用 |
| Hashgraph | DAG | Hedera 使用 |
| Block-lattice | DAG | Nano 使用 |

```
區塊鏈 vs DAG：

區塊鏈：
區塊1 → 區塊2 → 區塊3 → ...
（線性結構）

DAG：
    交易A ─┐
           ├─→ 交易D
    交易B ─┤     ↓
           └─→ 交易E
    交易C ─────→ 交易F
（有向無環圖）
```

{% hint style="info" %}
**為什麼要用 DAG？**

區塊鏈的線性結構限制了吞吐量——同時只能處理一個區塊。DAG 允許多個交易同時被確認，理論上可以達到更高的吞吐量。
{% endhint %}

---

## 共識的數學基礎

### 關鍵概念

| 概念 | 說明 |
|------|------|
| 一致性 | 所有節點同意相同的值 |
| 可用性 | 系統能持續運作 |
| 分區容錯 | 網路分割時仍能運作 |

### CAP 定理

```
CAP 定理：

分散式系統最多只能同時滿足兩個：
- 一致性（Consistency）
- 可用性（Availability）
- 分區容錯（Partition tolerance）

區塊鏈的選擇：
- 選擇 P（必須）
- 在 C 和 A 之間權衡
```

---

## 延伸閱讀

- [拜占庭將軍問題](bai-zhan-ting.md) — 分散式信任問題
- [雙花問題](hua.md) — 數位貨幣的關鍵挑戰
- [Tangle](tangle.md) — 非區塊鏈結構
- [共識機制](../README.md) — 共識總覽

---

#### 參考資料

- [The Byzantine Generals Problem](https://lamport.azurewebsites.net/pubs/byz.pdf)
- [Paxos Made Simple](https://lamport.azurewebsites.net/pubs/paxos-simple.pdf)

